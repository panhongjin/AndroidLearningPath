# 操作系统引论

## 1.1 操作系统的目标和作用

### 1.1.1 操作系统的目标

目前存在着多种类型的OS，不同类型的OS，其目标各有所侧重。通常在计算机硬件上配置的OS，其目标有以下几点：
- 方便性
- 有效性
- 可扩充性
- 开放性


### 1.1.2 操作系统的作用

1. 从计算机系统组成观点----操作系统是系统软件
计算机系统组成：
- 软件：应用软件、系统软件(操作系统、语言处理系统和常用的例行服务程序)
- 硬件：输入/输出(I/O)设备、存储器(内存)、中央处理器(CPU)
2. 从资源管理程序观点----操作系统是系统资源管理者
- 操作系统是系统资源管理程序，用于控制和管理计算机系统的硬件和软件资源。
- 计算机系统资源：硬件:I/O设备、存储器、处理器；操作系统模块：文件系统、设备管理、存储器管理、处理器(进程)管理。<br>
在一个计算机系统中，通常都含有各种各样的硬件和软件资源。归纳起来可将资源分为四类：处理器、存储器、I/O设备以及信息(数据和程序)。相应地，OS的主要功能也正是针对这四类资源进行有效的管理，即：处理机管理，用于分配和控制处理机；存储器管理，主要负责内存的分配和回收；I/O设备管理，负责I/O设备的分配与操纵；文件管理，负责文件的存取、共享和保护。可见，OS确实是计算机系统资源的管理者。事实上，当今世界上广为流行的一个关于OS作用的观点，正是把OS作为计算机系统的资源管理者。
3. 从软件分层、扩充机器的观点----操作系统是扩充裸机的第一层系统软件<br>
软件：语言处理程序 -----> 虚拟机2<br>
软件：操作系统 ----> 虚拟机1<br>
硬件(裸机)<br>
虚拟机：二者结合变成了功能更强大使用更方便的机器。<br>
操作系统是扩展的机器，是虚拟机。
4. 从服务用户的观点----操作系统是用户与裸机之间的接口。
- 命令方式。指由OS提供了一组联机命令(语言)，用户可通过键盘输入有关命令，来直接操纵计算机系统。
- 系统调用方式。OS提供了一组系统调用，用户可在自己的应用程序中通过相应的系统调用，来操纵计算机。
- 图形、窗口方式。用户通过屏幕上的窗口和图标来操纵计算机系统和运行自己的程序。


### 1.1.3 推动操作系统发展的主要动力

1. 不断提高计算机资源利用率
2. 方便用户
3. 器件的不断更新换代
4. 计算机体系结构的不断发展


## 1.2 操作系统的发展过程

### 1.2.1 无操作系统的计算机系统

1. 人工操作方式<br>
从第一台计算机诞生(1945年)到50年代中期的计算机，属于第一代，这时还未出现OS。这时的计算机操作是由用户(即程序员)采用人工操作方式直接使用计算机硬件系统，即由程序员将事先已穿孔(对应于程序和数据)的纸带(或卡片)装入纸带输入机(或卡片输入机)，再启动它们将程序和数据输入计算机， 然后启动计算机运行。当程序运行完毕并取走计算结果后， 才让下一个用户上机。这种人工操作方式有以下两方面的缺点：
- 用户独占全机
- CPU等待人工操作
2. 脱机输入/输出(Off-Line I/O)方式<br>
这种脱机I/O方式的主要优点如下：
- 减小了CPU的空闲时间
- 提供了I/O速度

### 1.2.2 单道批处理系统

1. 批处理技术：它利用磁带容量较大的特点，先将一批作业按序以脱机方式输入到磁带上。主机在监督程序控制下，根据卡片机读入控制作业操作信息，逐个从磁带上读入作业到内存，调入汇编/编释程序将源程序翻译成目标代码，连接装配后执行，结果输出打印。执行完毕后再调入下一个作业，系统就这样自动地一个一个作业地进行处理，直至完成，这是早期单道批处理系统，它解决了作业自动转换，从而减少了作业建立和人工操作时间。
2. 单道批处理系统的特征<br>
单道批处理系统是最早出现的一种OS，严格地说，它只能算作是OS的前身而并非是现在人们所理解的OS。尽管如此，该系统比起人工操作方式的系统已有很大进步。该系统的主要特征如下：
- 自动性
- 顺序性
- 单道性


### 1.2.3 多道批处理系统

1. 多道程序设计的基本概念<br>
在单道批处理系统中，内存中仅有一道作业，它无法充分利用系统中的所有资源，致使系统性能较差。为了进一步提高资源的利用率和系统吞吐量，在60年代中期又引入了多道程序设计技术，由此而形成了多道批处理系统。在该系统中，用户所提交的作业都先存放在外存上并排成一个队列，称为“后备队列”；然后，由作业调度程序按一定的算法从后备队列中选择若干个作业调入内存，使它们共享CPU和系统中的各种资源。<br>
在OS中引入多道程序设计技术可带来以下好处：
- 提高CPU的利用率<br>
当内存中仅有一道程序时，每逢该程序在运行中发出I/O请求后，CPU空闲，必须在其I/O完成后才继续运行；尤其因I/O设备的低速性，更使CPU的利用率显著降低。图 1-4(a)示出了单道程序的运行情况，从图可以看出：在t2~t3、 t6~t7时间间隔内CPU空闲。在引入多道程序设计技术后， 由于同时在内存中装有若干道程序，并使它们交替地运行， 这样，当正在运行的程序因I/O而暂停执行时，系统可调度另一道程序运行，从而保持了CPU处于忙碌状态。
- 可提高内存和I/O设备利用率<br>
为了能运行较大的作业，通常内存都具有较大容量，但由于80%以上的作业都属于中小型，因此在单道程序环境下，也必定造成内存的浪费。类似地，对于系统中所配置的多种类型的I/O设备， 在单道程序环境下也不能充分利用。如果允许在内存中装入多道程序， 并允许它们并发执行，则无疑会大大提高内存和I/O设备的利用率。
- 增加系统吞吐量<br>
在保持CPU、I/O设备不断忙碌的同时，也必然会大幅度地提高系统的吞吐量，从而降低作业加工所需的费用。
2. 多批道处理系统的特征
- 多道性
- 无序性
- 调度性
3. 多道批处理系统的优缺点：
- 资源利用率高
- 系统吞吐量大
- 平均周转时间长
- 无交互能力
4. 多道批处理系统需要解决的问题
- 处理机管理问题
- 内存管理问题
- I/O设备管理问题
- 文件管理问题
- 作业管理问题


### 1.2.4 分时系统

1. 分时系统的产生<br>
如果说， 推动多道批处理系统形成和发展的主要动力，是提高资源利用率和系统吞吐量，那么，推动分时系统形成和发展的主要动力，则是用户的需求。或者说，分时系统是为了满足用户需求所形成的一种新型OS。它与多道批处理系统之间，有着截然不同的性能差别。用户的需求具体表现在以下几个方面：
- 人-机交互
- 共享主机
- 便于用户上机
2. 分时系统实现中的关键问题<br>
为实现分时系统，其中，最关键的问题是如何使用户能与自己的作业进行交互，即当用户在自己的终端上键入命令时， 系统应能及时接收并及时处理该命令，再将结果返回给用户。 此后， 用户可继续键入下一条命令，此即人—机交互。应强调指出，即使有多个用户同时通过自己的键盘键入命令，系统也应能全部地及时接收并处理：
- 及时接收
- 及时处理
3. 分时系统的特征
- 多路性：允许在一台主机上同时联接多台联机终端，系统按分时原则为每个用户服务。宏观上是多个用户同时工作，共享系统资源，而微观上则是每个用户作业轮流运行一个时间片。多路性即同时性，它提高了资源利用率，从而促进了计算机更广泛的应用。
- 独立性：每个用户各占一个终端，彼此独立操作，互不干扰。因此用户会感觉到就象他一人独占主机。
- 交互性：用户可通过终端与系统进行广泛的人机对话。用户可以请求系统提供多方面服务，如文件编辑，数据处理和资源共享等。
- 及时性：用户的请求能在很短时间内获得响应，此时间间隔是以人们所能接受的等待时间来确定的，通常为1-2秒。
4. 分时系统的重要指标--响应时间<br>
  响应时间是分时系统的重要指标，它是用户发生终端命令到系统开始作出响应间的时间间隔。系统的响应时间主要是根据用户所能接受的等待时间确定的。假设分时系统中用户数为n，每个用户的运行时间片为q，则系统的响应时间为T＝n×q。每个用户分到的时间片q由二部分组成，用于对换时间S和用于真正处理时间T(处理)。
- T = n X q
- q = S + T(处理)
5. 响应时间<br>
- 分时系统中时间片q的选择是一个复杂和关键的任务，如时间片选得过大，造成响应时间不变时用户数减少，或造成响应时间过长，当时间片过小时，在一个时间片内切换开销相对增加，一个进程相对要花费更多的时间片才能运行结束，一个进程在系统中的周转时间大大增长。最佳的时间片值应既能使分时用户得到好的响应时间，同时又要使在一个时间片内切换开销相对较小可忽略。
- UNIX系统是典型的分时系统，UNIX系统是一个多用户，多任务操作系统。


### 1.2.5 实时系统

所谓“实时”，是表示“及时”，而实时系统(Real-Time System)是指系统能及时(或即时)响应外部事件的请求，在规定的时间内完成对该事件的处理，并控制所有实时任务协调一致地运行。 
1. 应用需求
- 实时控制
- 实时信息处理
2. 实时任务





